name: ZenPacks.community.LogMatch

device_classes:
  /Server/Linux/LogMatch:
    remove: False     # False is default - specified for clarity
    zProperties:
      zPythonClass: ZenPacks.community.LogMatch.LogMatchDevice
      zCollectorPlugins: ['zenoss.snmp.NewDeviceMap', 'zenoss.snmp.DeviceMap', 'HPDeviceMap', 'DellDeviceMap', 'zenoss.snmp.InterfaceMap', 'zenoss.snmp.RouteMap', 'zenoss.snmp.IpServiceMap', 'zenoss.snmp.HRFileSystemMap', 'zenoss.snmp.HRSWRunMap', 'zenoss.snmp.CpuMap', 'HPCPUMap', 'DellCPUMap', 'DellPCIMap', 'zenoss.snmp.SnmpV3EngineIdMap', 'community.snmp.LogMatchDeviceMap', 'community.snmp.LogMatchMap']


classes:
  DEFAULTS:
    base: [zenpacklib.Component]

  LogMatchDevice:
    base: [zenpacklib.Device]
    meta_type: LogMatchDevice  # Will default to this but in for completeness
    label: LogMatch Host

    properties:
      versionTag:
        type: string
        label: Version Tag
        short_label: VerTag
      versionDate:
        type: string
        label: Version Date
        short_label: VerDate

    relationships:
      logMatchs:
        label: logMatchs
        display: false

  LogMatch:
    label: Log Match File  # NB It is label, with spaces removed, that is used to match a component template
    meta_type: LogMatch   # Will default to this but in for completeness
    order: 60   # 
    auto_expand_column: logMatchFilename
    monitoring_templates: [LogMatch]

    properties:
      logMatchName:
        type: string
        label: LogMatch Name
        label_width: 100
        order: 3.1
      logMatchFilename:
        type: string
        label: LogMatch Filename
        label_width: 350
        order: 3.2
      logMatchRegEx:
        type: string
        label: LogMatch RegEx
        label_width: 130
        order: 3.3
      logMatchCycle:
        type: int
        label: LogMatch Cycle
        grid_display: false
        order: 3.4
      logMatchErrorFlag:
        type: int
        label: LogMatch ErrorFlag
        label_width: 100
        grid_display: false
        order: 3.5
      logMatchRegExCompilation:
        type: string
        label: LogMatch RegExCompilation
        label_width: 100
        grid_display: false
        order: 3.6
      logMatchCurrentCounter:
        type: int
        label: Current Counter
        label_width: 60
        order: 3.7
        datapoint: logMatchCurrentCounter_logMatchCurrentCounter
        datapoint_default: 0

    relationships:
      logMatchDevice:
        label: logMatchDevice
        display: true

class_relationships:
  - LogMatchDevice(logMatchs) 1:MC LogMatch(logMatchDevice)


